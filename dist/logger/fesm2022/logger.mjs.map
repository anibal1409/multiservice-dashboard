{"version":3,"file":"logger.mjs","sources":["../../../projects/logger/src/lib/interfaces/logger-config.ts","../../../projects/logger/src/lib/logger.service.ts","../../../projects/logger/src/lib/logger.module.ts","../../../projects/logger/src/logger.ts"],"sourcesContent":["export interface LoggerConfig {\n  /** Permite enviar los logs remotamente */\n  allowRemoteLogging?: boolean;\n  /** Habilita logs  */\n  allowConsole?: boolean;\n  /** URL externa para enviar los logs */\n  remoteURL?: string;\n}\n\nexport const LoggerConfigKey = 'LOGGER_CONFIG';\n","import { HttpClient } from '@angular/common/http';\nimport { Inject, Injectable, Optional } from '@angular/core';\n\nimport { LoggerConfig, LoggerConfigKey } from './interfaces';\n\n/**\n * Servicio centralizaco para mantener la observabilidad de los datos del\n * sistema, errores, logs, anal√≠ticas, etc, se utiliza para informar los reportes\n * de error a la plataforma administrativa del sistema\n *\n */\n\n@Injectable()\nexport class LoggerService {\n  constructor(\n    private httpClient: HttpClient,\n    @Optional()\n    @Inject(LoggerConfigKey)\n    private config: LoggerConfig = {\n      allowConsole: true,\n      allowRemoteLogging: false,\n    }\n  ) {}\n\n  /**\n   * Reporta errores a la plataforma\n   * TODO: Crear un API res para el reporte de errores\n   * @param error Error a Enviar\n   */\n  reportError(error: Error, config: LoggerConfig = {}): void {\n    config = {\n      ...this.config,\n      ...config,\n    };\n    if (config?.allowConsole) {\n      console.error(error);\n    }\n\n    if (config?.allowRemoteLogging) {\n      this.httpClient.post<any>(config?.remoteURL || '', error).subscribe();\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport {\n  ModuleWithProviders,\n  NgModule,\n} from '@angular/core';\n\nimport {\n  LoggerConfig,\n  LoggerConfigKey,\n} from './interfaces';\nimport { LoggerService } from './logger.service';\n\n@NgModule({\n  declarations: [],\n  imports: [CommonModule],\n  providers: [LoggerService],\n})\nexport class LoggerModule {\n  static forRoot(\n    config: LoggerConfig = { allowConsole: true }\n  ): ModuleWithProviders<LoggerModule> {\n    return {\n      ngModule: LoggerModule,\n      providers: [\n        { provide: LoggerConfigKey, useValue: config },\n        LoggerService,\n      ],\n    };\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;;;;AASO,MAAM,eAAe,GAAG;;ACJ/B;;;;;AAKG;MAGU,aAAa,CAAA;IACxB,WACU,CAAA,UAAsB,EAGtB,MAAuB,GAAA;AAC7B,QAAA,YAAY,EAAE,IAAI;AAClB,QAAA,kBAAkB,EAAE,KAAK;AAC1B,KAAA,EAAA;QANO,IAAU,CAAA,UAAA,GAAV,UAAU,CAAY;QAGtB,IAAM,CAAA,MAAA,GAAN,MAAM,CAGb;KACC;AAEJ;;;;AAIG;AACH,IAAA,WAAW,CAAC,KAAY,EAAE,MAAA,GAAuB,EAAE,EAAA;AACjD,QAAA,MAAM,GAAG;YACP,GAAG,IAAI,CAAC,MAAM;AACd,YAAA,GAAG,MAAM;SACV,CAAC;QACF,IAAI,MAAM,EAAE,YAAY,EAAE;AACxB,YAAA,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;AACtB,SAAA;QAED,IAAI,MAAM,EAAE,kBAAkB,EAAE;AAC9B,YAAA,IAAI,CAAC,UAAU,CAAC,IAAI,CAAM,MAAM,EAAE,SAAS,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC,SAAS,EAAE,CAAC;AACvE,SAAA;KACF;AA5BU,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,EAAA,CAAA,kBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,aAAa,4CAId,eAAe,EAAA,QAAA,EAAA,IAAA,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,UAAA,EAAA,CAAA,CAAA,EAAA;mHAJd,aAAa,EAAA,CAAA,CAAA,EAAA;;4FAAb,aAAa,EAAA,UAAA,EAAA,CAAA;kBADzB,UAAU;;0BAIN,QAAQ;;0BACR,MAAM;2BAAC,eAAe,CAAA;;;MCAd,YAAY,CAAA;IACvB,OAAO,OAAO,CACZ,MAAA,GAAuB,EAAE,YAAY,EAAE,IAAI,EAAE,EAAA;QAE7C,OAAO;AACL,YAAA,QAAQ,EAAE,YAAY;AACtB,YAAA,SAAS,EAAE;AACT,gBAAA,EAAE,OAAO,EAAE,eAAe,EAAE,QAAQ,EAAE,MAAM,EAAE;gBAC9C,aAAa;AACd,aAAA;SACF,CAAC;KACH;+GAXU,YAAY,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,QAAA,EAAA,CAAA,CAAA,EAAA;AAAZ,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,EAAA,CAAA,mBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,YAAY,YAHb,YAAY,CAAA,EAAA,CAAA,CAAA,EAAA;AAGX,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,EAAA,CAAA,mBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,YAAY,EAFZ,SAAA,EAAA,CAAC,aAAa,CAAC,YADhB,YAAY,CAAA,EAAA,CAAA,CAAA,EAAA;;4FAGX,YAAY,EAAA,UAAA,EAAA,CAAA;kBALxB,QAAQ;AAAC,YAAA,IAAA,EAAA,CAAA;AACR,oBAAA,YAAY,EAAE,EAAE;oBAChB,OAAO,EAAE,CAAC,YAAY,CAAC;oBACvB,SAAS,EAAE,CAAC,aAAa,CAAC;AAC3B,iBAAA,CAAA;;;AChBD;;AAEG;;;;"}